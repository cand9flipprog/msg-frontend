{"ast":null,"code":"var _jsxFileName = \"/home/mika/projects/messanger/frontend/src/components/Settings.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Settings = () => {\n  _s();\n  const [name, setName] = useState('');\n  const [surname, setSurname] = useState('');\n  const [email, setEmail] = useState('');\n  const [userInfo, setUserInfo] = useState('');\n  const notificationRef = useRef(null);\n  const API_URL = \"http://192.168.242.67:8000/api/users\";\n  useEffect(() => {\n    const getUserData = async () => {\n      const userData = await getUserInfo();\n      setUserInfo(userData);\n    };\n    getUserData();\n  }, []);\n  const fetchAPI = async (method, endpoint, body) => {\n    const resp = await fetch(`${API_URL}/${endpoint}`, {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    });\n    const data = await resp.json();\n    if (resp.status === 200) {\n      NotificationManager.success(data.success, \"Success\", 2000, () => {}, notificationRef.current);\n    } else {\n      NotificationManager.error(data.error, \"Error\", 2000, () => {}, notificationRef.current);\n    }\n    return data;\n  };\n  const onUpdateUserInfo = (userId, name, surname) => {\n    fetchAPI(\"PATCH\", \"update_user_info\", {\n      userId: userId,\n      name: name,\n      surname: surname\n    });\n  };\n  const onUpdateEmail = (userId, email) => {\n    fetchAPI(\"PATCH\", \"update_email\", {\n      userId: userId,\n      email: email\n    });\n  };\n  const onUpdateAvatar = (ev, userId) => {\n    const formData = new FormData();\n    formData.append('avatar', ev.target.files[0]);\n    fetchAPI(\"PATCH\", \"update_avatar\", {\n      userId: userId,\n      avatarUrl: formData\n    });\n  };\n  const onFileChange = async ev => {\n    const formData = new FormData();\n    formData.append('avatar', ev.target.files[0]);\n  };\n\n  //                    <input type=\"text\" placeholder=\"Avatar URL\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" onChange={(ev) => setAvatarUrl(ev.target.value)} />\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"User info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Name\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: name || userInfo.name,\n          onChange: ev => setName(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Surname\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: surname || userInfo.surname,\n          onChange: ev => setSurname(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateUserInfo(userInfo.id_user, name, surname),\n          children: \"Update user info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: email || userInfo.email,\n          onChange: ev => setEmail(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateEmail(userInfo.id_user, email),\n          children: \"Update email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: onUpdateAvatar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateAvatar(userInfo.id_user, avatarUrl),\n          children: \"Update avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NotificationContainer, {\n      ref: notificationRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(Settings, \"BkcrvqAfs2/ux3/NEf4mPMFNJ6c=\");\n_c = Settings;\nexport default Settings;\nvar _c;\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"names":["useEffect","useState","useRef","NotificationContainer","NotificationManager","getUserInfo","jsxDEV","_jsxDEV","Settings","_s","name","setName","surname","setSurname","email","setEmail","userInfo","setUserInfo","notificationRef","API_URL","getUserData","userData","fetchAPI","method","endpoint","body","resp","fetch","headers","Accept","JSON","stringify","data","json","status","success","current","error","onUpdateUserInfo","userId","onUpdateEmail","onUpdateAvatar","ev","formData","FormData","append","target","files","avatarUrl","onFileChange","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","onClick","id_user","ref","_c","$RefreshReg$"],"sources":["/home/mika/projects/messanger/frontend/src/components/Settings.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\n\nconst Settings = () => {\n    const [name, setName] = useState('');\n    const [surname, setSurname] = useState('');\n    const [email, setEmail] = useState('');\n    const [userInfo, setUserInfo] = useState('');\n\n    const notificationRef = useRef(null);\n\n    const API_URL = \"http://192.168.242.67:8000/api/users\";\n\n    useEffect(() => {\n        const getUserData = async () => {\n            const userData = await getUserInfo();\n\n            setUserInfo(userData);\n        }\n\n        getUserData();\n    }, []);\n\n    const fetchAPI = async (method, endpoint, body) => {\n        const resp = await fetch(`${API_URL}/${endpoint}`, {\n            method: method,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        });\n\n        const data = await resp.json();\n\n        if (resp.status === 200) {\n            NotificationManager.success(data.success, \"Success\", 2000, () => { }, notificationRef.current);\n        } else {\n            NotificationManager.error(data.error, \"Error\", 2000, () => { }, notificationRef.current);\n        }\n\n        return data;\n    };\n\n    const onUpdateUserInfo = (userId, name, surname) => {\n        fetchAPI(\"PATCH\", \"update_user_info\", { userId: userId, name: name, surname: surname });\n    };\n\n    const onUpdateEmail = (userId, email) => {\n        fetchAPI(\"PATCH\", \"update_email\", { userId: userId, email: email });\n    };\n\n    const onUpdateAvatar = (ev, userId) => {\n        const formData = new FormData();\n        formData.append('avatar', ev.target.files[0]);\n\n        fetchAPI(\"PATCH\", \"update_avatar\", { userId: userId, avatarUrl: formData });\n    };\n\n    const onFileChange = async (ev) => {\n        const formData = new FormData();\n\n        formData.append('avatar', ev.target.files[0]);\n    }\n\n    //                    <input type=\"text\" placeholder=\"Avatar URL\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" onChange={(ev) => setAvatarUrl(ev.target.value)} />\n\n    return (\n        <section>\n            <div className=\"flex flex-col gap-4\">\n                <div className=\"flex flex-col gap-2\">\n                    <span>User info</span>\n                    <input type=\"text\" placeholder=\"Name\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={name || userInfo.name} onChange={(ev) => setName(ev.target.value)} />\n                    <input type=\"text\" placeholder=\"Surname\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={surname || userInfo.surname} onChange={(ev) => setSurname(ev.target.value)} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateUserInfo(userInfo.id_user, name, surname)}>Update user info</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Email</span>\n                    <input type=\"email\" placeholder=\"Email\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={email || userInfo.email} onChange={(ev) => setEmail(ev.target.value)} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateEmail(userInfo.id_user, email)}>Update email</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Avatar</span>\n                    <input type=\"file\" onChange={onUpdateAvatar} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateAvatar(userInfo.id_user, avatarUrl)}>Update avatar</button>\n                </div>\n            </div>\n            <NotificationContainer ref={notificationRef} />\n        </section>\n    )\n};\n\nexport default Settings;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,qBAAqB,EAAEC,mBAAmB,QAAQ,qBAAqB;AAChF,OAAO,2CAA2C;AAClD,OAAOC,WAAW,MAAM,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMiB,eAAe,GAAGhB,MAAM,CAAC,IAAI,CAAC;EAEpC,MAAMiB,OAAO,GAAG,sCAAsC;EAEtDnB,SAAS,CAAC,MAAM;IACZ,MAAMoB,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMC,QAAQ,GAAG,MAAMhB,WAAW,CAAC,CAAC;MAEpCY,WAAW,CAACI,QAAQ,CAAC;IACzB,CAAC;IAEDD,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,QAAQ,GAAG,MAAAA,CAAOC,MAAM,EAAEC,QAAQ,EAAEC,IAAI,KAAK;IAC/C,MAAMC,IAAI,GAAG,MAAMC,KAAK,CAAE,GAAER,OAAQ,IAAGK,QAAS,EAAC,EAAE;MAC/CD,MAAM,EAAEA,MAAM;MACdK,OAAO,EAAE;QACLC,MAAM,EAAE,kBAAkB;QAC1B,cAAc,EAAE;MACpB,CAAC;MACDJ,IAAI,EAAEK,IAAI,CAACC,SAAS,CAACN,IAAI;IAC7B,CAAC,CAAC;IAEF,MAAMO,IAAI,GAAG,MAAMN,IAAI,CAACO,IAAI,CAAC,CAAC;IAE9B,IAAIP,IAAI,CAACQ,MAAM,KAAK,GAAG,EAAE;MACrB9B,mBAAmB,CAAC+B,OAAO,CAACH,IAAI,CAACG,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,CAAE,CAAC,EAAEjB,eAAe,CAACkB,OAAO,CAAC;IAClG,CAAC,MAAM;MACHhC,mBAAmB,CAACiC,KAAK,CAACL,IAAI,CAACK,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,CAAE,CAAC,EAAEnB,eAAe,CAACkB,OAAO,CAAC;IAC5F;IAEA,OAAOJ,IAAI;EACf,CAAC;EAED,MAAMM,gBAAgB,GAAGA,CAACC,MAAM,EAAE7B,IAAI,EAAEE,OAAO,KAAK;IAChDU,QAAQ,CAAC,OAAO,EAAE,kBAAkB,EAAE;MAAEiB,MAAM,EAAEA,MAAM;MAAE7B,IAAI,EAAEA,IAAI;MAAEE,OAAO,EAAEA;IAAQ,CAAC,CAAC;EAC3F,CAAC;EAED,MAAM4B,aAAa,GAAGA,CAACD,MAAM,EAAEzB,KAAK,KAAK;IACrCQ,QAAQ,CAAC,OAAO,EAAE,cAAc,EAAE;MAAEiB,MAAM,EAAEA,MAAM;MAAEzB,KAAK,EAAEA;IAAM,CAAC,CAAC;EACvE,CAAC;EAED,MAAM2B,cAAc,GAAGA,CAACC,EAAE,EAAEH,MAAM,KAAK;IACnC,MAAMI,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEH,EAAE,CAACI,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IAE7CzB,QAAQ,CAAC,OAAO,EAAE,eAAe,EAAE;MAAEiB,MAAM,EAAEA,MAAM;MAAES,SAAS,EAAEL;IAAS,CAAC,CAAC;EAC/E,CAAC;EAED,MAAMM,YAAY,GAAG,MAAOP,EAAE,IAAK;IAC/B,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAE/BD,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEH,EAAE,CAACI,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;EACjD,CAAC;;EAED;;EAEA,oBACIxC,OAAA;IAAA2C,QAAA,gBACI3C,OAAA;MAAK4C,SAAS,EAAC,qBAAqB;MAAAD,QAAA,gBAChC3C,OAAA;QAAK4C,SAAS,EAAC,qBAAqB;QAAAD,QAAA,gBAChC3C,OAAA;UAAA2C,QAAA,EAAM;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACtBhD,OAAA;UAAOiD,IAAI,EAAC,MAAM;UAACC,WAAW,EAAC,MAAM;UAACN,SAAS,EAAC,0DAA0D;UAACO,KAAK,EAAEhD,IAAI,IAAIM,QAAQ,CAACN,IAAK;UAACiD,QAAQ,EAAGjB,EAAE,IAAK/B,OAAO,CAAC+B,EAAE,CAACI,MAAM,CAACY,KAAK;QAAE;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACvLhD,OAAA;UAAOiD,IAAI,EAAC,MAAM;UAACC,WAAW,EAAC,SAAS;UAACN,SAAS,EAAC,0DAA0D;UAACO,KAAK,EAAE9C,OAAO,IAAII,QAAQ,CAACJ,OAAQ;UAAC+C,QAAQ,EAAGjB,EAAE,IAAK7B,UAAU,CAAC6B,EAAE,CAACI,MAAM,CAACY,KAAK;QAAE;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACnMhD,OAAA;UAAQ4C,SAAS,EAAC,gFAAgF;UAACS,OAAO,EAAEA,CAAA,KAAMtB,gBAAgB,CAACtB,QAAQ,CAAC6C,OAAO,EAAEnD,IAAI,EAAEE,OAAO,CAAE;UAAAsC,QAAA,EAAC;QAAgB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7L,CAAC,eACNhD,OAAA;QAAK4C,SAAS,EAAC,qBAAqB;QAAAD,QAAA,gBAChC3C,OAAA;UAAA2C,QAAA,EAAM;QAAK;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAClBhD,OAAA;UAAOiD,IAAI,EAAC,OAAO;UAACC,WAAW,EAAC,OAAO;UAACN,SAAS,EAAC,0DAA0D;UAACO,KAAK,EAAE5C,KAAK,IAAIE,QAAQ,CAACF,KAAM;UAAC6C,QAAQ,EAAGjB,EAAE,IAAK3B,QAAQ,CAAC2B,EAAE,CAACI,MAAM,CAACY,KAAK;QAAE;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC5LhD,OAAA;UAAQ4C,SAAS,EAAC,gFAAgF;UAACS,OAAO,EAAEA,CAAA,KAAMpB,aAAa,CAACxB,QAAQ,CAAC6C,OAAO,EAAE/C,KAAK,CAAE;UAAAoC,QAAA,EAAC;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9K,CAAC,eACNhD,OAAA;QAAK4C,SAAS,EAAC,qBAAqB;QAAAD,QAAA,gBAChC3C,OAAA;UAAA2C,QAAA,EAAM;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACnBhD,OAAA;UAAOiD,IAAI,EAAC,MAAM;UAACG,QAAQ,EAAElB;QAAe;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC/ChD,OAAA;UAAQ4C,SAAS,EAAC,gFAAgF;UAACS,OAAO,EAAEA,CAAA,KAAMnB,cAAc,CAACzB,QAAQ,CAAC6C,OAAO,EAAEb,SAAS,CAAE;UAAAE,QAAA,EAAC;QAAa;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACNhD,OAAA,CAACJ,qBAAqB;MAAC2D,GAAG,EAAE5C;IAAgB;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1C,CAAC;AAElB,CAAC;AAAC9C,EAAA,CAvFID,QAAQ;AAAAuD,EAAA,GAARvD,QAAQ;AAyFd,eAAeA,QAAQ;AAAC,IAAAuD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}