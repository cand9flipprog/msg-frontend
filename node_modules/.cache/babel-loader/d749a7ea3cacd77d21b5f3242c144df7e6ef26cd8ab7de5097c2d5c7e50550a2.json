{"ast":null,"code":"var _jsxFileName = \"/home/mika/projects/messanger/frontend/src/components/Settings.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Settings = () => {\n  _s();\n  const [name, setName] = useState('');\n  const [surname, setSurname] = useState('');\n  const [email, setEmail] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n  const [userInfo, setUserInfo] = useState('');\n  const notificationRef = useRef(null);\n  const API_URL = \"http://192.168.1.66:8000/api/users\";\n  useEffect(() => {\n    const getUserData = async () => {\n      const userData = await getUserInfo();\n      console.log(userData);\n      setUserInfo(userData);\n    };\n    getUserData();\n  }, []);\n  const fetchAPI = async (method, endpoint, body) => {\n    const resp = await fetch(`${API_URL}/${endpoint}`, {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    });\n    const data = await resp.json();\n    if (resp.status === 200) {\n      NotificationManager.success(data.success, \"Success\", 2000, () => {}, notificationRef.current);\n    } else {\n      NotificationManager.error(data.error, \"Error\", 2000, () => {}, notificationRef.current);\n    }\n    return data;\n  };\n  const onUpdateUserInfo = (userId, name, surname) => {\n    fetchAPI(\"PATCH\", \"update_user_info\", {\n      userId: userId,\n      name: name,\n      surname: surname\n    });\n  };\n  const onUpdateEmail = (userId, email) => {\n    fetchAPI(\"PATCH\", \"update_email\", {\n      userId: userId,\n      email: email\n    });\n  };\n  const onUpdateAvatar = (userId, avatar) => {\n    fetchAPI(\"PATCH\", \"update_avatar\", {\n      userId: userId,\n      avatarUrl: avatar\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"User info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Name\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: userInfo.name,\n          onChange: ev => setName(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Surname\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: userInfo.surname,\n          onChange: ev => setSurname(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateUserInfo(userInfo.id_user, name, surname),\n          children: \"Update user info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          value: userInfo.email,\n          onChange: ev => setEmail(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateEmail(userInfo.id_user, email),\n          children: \"Update email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Avatar URL\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          onChange: ev => setAvatarUrl(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\",\n          onClick: () => onUpdateAvatar(userInfo.id_user, avatarUrl),\n          children: \"Update avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NotificationContainer, {\n      ref: notificationRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(Settings, \"DrDqFqTrKKPr/bH4Fz9qaO9JaFw=\");\n_c = Settings;\nexport default Settings;\nvar _c;\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"names":["useEffect","useState","useRef","NotificationContainer","NotificationManager","getUserInfo","jsxDEV","_jsxDEV","Settings","_s","name","setName","surname","setSurname","email","setEmail","avatarUrl","setAvatarUrl","userInfo","setUserInfo","notificationRef","API_URL","getUserData","userData","console","log","fetchAPI","method","endpoint","body","resp","fetch","headers","Accept","JSON","stringify","data","json","status","success","current","error","onUpdateUserInfo","userId","onUpdateEmail","onUpdateAvatar","avatar","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","ev","target","onClick","id_user","ref","_c","$RefreshReg$"],"sources":["/home/mika/projects/messanger/frontend/src/components/Settings.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\n\nconst Settings = () => {\n    const [name, setName] = useState('');\n    const [surname, setSurname] = useState('');\n    const [email, setEmail] = useState('');\n    const [avatarUrl, setAvatarUrl] = useState('');\n    const [userInfo, setUserInfo] = useState('');\n\n    const notificationRef = useRef(null);\n\n    const API_URL = \"http://192.168.1.66:8000/api/users\";\n\n    useEffect(() => {\n        const getUserData = async () => {\n            const userData = await getUserInfo();\n\n            console.log(userData);\n\n            setUserInfo(userData);\n        }\n\n        getUserData();\n    }, []);\n\n    const fetchAPI = async (method, endpoint, body) => {\n        const resp = await fetch(`${API_URL}/${endpoint}`, {\n            method: method,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        });\n\n        const data = await resp.json();\n\n        if (resp.status === 200) {\n            NotificationManager.success(data.success, \"Success\", 2000, () => { }, notificationRef.current);\n        } else {\n            NotificationManager.error(data.error, \"Error\", 2000, () => { }, notificationRef.current);\n        }\n\n        return data;\n    };\n\n    const onUpdateUserInfo = (userId, name, surname) => {\n        fetchAPI(\"PATCH\", \"update_user_info\", { userId: userId, name: name, surname: surname });\n    };\n\n    const onUpdateEmail = (userId, email) => {\n        fetchAPI(\"PATCH\", \"update_email\", { userId: userId, email: email });\n    };\n\n    const onUpdateAvatar = (userId, avatar) => {\n        fetchAPI(\"PATCH\", \"update_avatar\", { userId: userId, avatarUrl: avatar });\n    };\n\n    return (\n        <section>\n            <div className=\"flex flex-col gap-4\">\n                <div className=\"flex flex-col gap-2\">\n                    <span>User info</span>\n                    <input type=\"text\" placeholder=\"Name\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={userInfo.name} onChange={(ev) => setName(ev.target.value)} />\n                    <input type=\"text\" placeholder=\"Surname\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={userInfo.surname} onChange={(ev) => setSurname(ev.target.value)} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateUserInfo(userInfo.id_user, name, surname)}>Update user info</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Email</span>\n                    <input type=\"email\" placeholder=\"Email\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" value={userInfo.email} onChange={(ev) => setEmail(ev.target.value)} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateEmail(userInfo.id_user, email)}>Update email</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Avatar</span>\n                    <input type=\"text\" placeholder=\"Avatar URL\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" onChange={(ev) => setAvatarUrl(ev.target.value)} />\n                    <button className=\"bg-zinc-300 px-2 py-2 rounded-md text-black hover:bg-zinc-500 hover:text-white\" onClick={() => onUpdateAvatar(userInfo.id_user, avatarUrl)}>Update avatar</button>\n                </div>\n            </div>\n            <NotificationContainer ref={notificationRef} />\n        </section>\n    )\n};\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}