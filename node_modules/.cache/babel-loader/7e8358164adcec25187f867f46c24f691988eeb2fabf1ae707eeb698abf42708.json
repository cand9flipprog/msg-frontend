{"ast":null,"code":"var _jsxFileName = \"/home/mika/projects/messanger/frontend/src/components/Settings.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Settings = () => {\n  _s();\n  const [name, setName] = useState('');\n  const [surname, setSurname] = useState('');\n  const [email, setEmail] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n  const [userInfo, setUserInfo] = useState('');\n  const notificationRef = useRef(null);\n  const API_URL = \"http://192.168.242.67:8000/api/users\";\n  useEffect(() => {\n    const getUserData = async () => {\n      const userData = await getUserInfo();\n      setName(userInfo.name);\n      setSurname(userInfo.surname);\n      setEmail(userInfo.email);\n    };\n    getUserData();\n  }, []);\n  const fetchAPI = async (method, endpoint, body) => {\n    const resp = await fetch(`${API_URL}/${endpoint}`, {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    });\n    const data = await resp.json();\n    if (resp.status === 200) {\n      NotificationManager.success(data.success, \"Success\", 2000, () => {}, notificationRef.current);\n    } else {\n      NotificationManager.error(data.error, \"Error\", 2000, () => {}, notificationRef.current);\n    }\n    return data;\n  };\n  const onUpdateUserInfo = (userId, name, surname) => {\n    fetchAPI(\"PATCH\", \"update_user_info\", {\n      userId: userId,\n      name: name,\n      surname: surname\n    });\n  };\n  const onUpdateEmail = (userId, email) => {\n    fetchAPI(\"PATCH\", \"update_email\", {\n      userId: userId,\n      email: email\n    });\n  };\n  const onUpdateAvatar = (userId, avatar) => {\n    fetchAPI(\"PATCH\", \"update_avatar\", {\n      userId: userId,\n      avatarUrl: avatar\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"User info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Name\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          defaultValue: userInfo.name,\n          onChange: ev => setName(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Surname\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          defaultValue: userInfo.surname,\n          onChange: ev => setSurname(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\",\n          onClick: () => onUpdateUserInfo(userInfo.id_user, name, surname),\n          children: \"Update user info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          defaultValue: userInfo.email,\n          onChange: ev => setEmail(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\",\n          onClick: () => onUpdateEmail(userInfo.id_user, email),\n          children: \"Update email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Avatar URL\",\n          className: \"w-64 px-2 border-solid border border-zinc-300 rounded-md\",\n          onChange: ev => setAvatarUrl(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\",\n          onClick: () => onUpdateAvatar(userInfo.id_user, avatarUrl),\n          children: \"Update avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NotificationContainer, {\n      ref: notificationRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(Settings, \"DrDqFqTrKKPr/bH4Fz9qaO9JaFw=\");\n_c = Settings;\nexport default Settings;\nvar _c;\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"names":["useEffect","useState","useRef","NotificationContainer","NotificationManager","getUserInfo","jsxDEV","_jsxDEV","Settings","_s","name","setName","surname","setSurname","email","setEmail","avatarUrl","setAvatarUrl","userInfo","setUserInfo","notificationRef","API_URL","getUserData","userData","fetchAPI","method","endpoint","body","resp","fetch","headers","Accept","JSON","stringify","data","json","status","success","current","error","onUpdateUserInfo","userId","onUpdateEmail","onUpdateAvatar","avatar","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","defaultValue","onChange","ev","target","value","onClick","id_user","ref","_c","$RefreshReg$"],"sources":["/home/mika/projects/messanger/frontend/src/components/Settings.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport getUserInfo from \"../requests/getUserInfo.js\";\n\nconst Settings = () => {\n    const [name, setName] = useState('');\n    const [surname, setSurname] = useState('');\n    const [email, setEmail] = useState('');\n    const [avatarUrl, setAvatarUrl] = useState('');\n    const [userInfo, setUserInfo] = useState('');\n\n    const notificationRef = useRef(null);\n\n    const API_URL = \"http://192.168.242.67:8000/api/users\";\n\n    useEffect(() => {\n        const getUserData = async () => {\n            const userData = await getUserInfo();\n\n            setName(userInfo.name);\n            setSurname(userInfo.surname);\n            setEmail(userInfo.email);\n        }\n\n        getUserData();\n    }, []);\n\n    const fetchAPI = async (method, endpoint, body) => {\n        const resp = await fetch(`${API_URL}/${endpoint}`, {\n            method: method,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        });\n\n        const data = await resp.json();\n\n        if (resp.status === 200) {\n            NotificationManager.success(data.success, \"Success\", 2000, () => { }, notificationRef.current);\n        } else {\n            NotificationManager.error(data.error, \"Error\", 2000, () => { }, notificationRef.current);\n        }\n\n        return data;\n    };\n\n    const onUpdateUserInfo = (userId, name, surname) => {\n        fetchAPI(\"PATCH\", \"update_user_info\", { userId: userId, name: name, surname: surname });\n    };\n\n    const onUpdateEmail = (userId, email) => {\n        fetchAPI(\"PATCH\", \"update_email\", { userId: userId, email: email });\n    };\n\n    const onUpdateAvatar = (userId, avatar) => {\n        fetchAPI(\"PATCH\", \"update_avatar\", { userId: userId, avatarUrl: avatar });\n    };\n\n    return (\n        <section>\n            <div className=\"flex flex-col gap-4\">\n                <div className=\"flex flex-col gap-2\">\n                    <span>User info</span>\n                    <input type=\"text\" placeholder=\"Name\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" defaultValue={userInfo.name} onChange={(ev) => setName(ev.target.value)} />\n                    <input type=\"text\" placeholder=\"Surname\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" defaultValue={userInfo.surname} onChange={(ev) => setSurname(ev.target.value)} />\n                    <button className=\"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\" onClick={() => onUpdateUserInfo(userInfo.id_user, name, surname)}>Update user info</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Email</span>\n                    <input type=\"email\" placeholder=\"Email\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" defaultValue={userInfo.email} onChange={(ev) => setEmail(ev.target.value)} />\n                    <button className=\"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\" onClick={() => onUpdateEmail(userInfo.id_user, email)}>Update email</button>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                    <span>Avatar</span>\n                    <input type=\"text\" placeholder=\"Avatar URL\" className=\"w-64 px-2 border-solid border border-zinc-300 rounded-md\" onChange={(ev) => setAvatarUrl(ev.target.value)} />\n                    <button className=\"bg-blue-400 px-2 py-2 rounded-md text-white hover:bg-blue-500\" onClick={() => onUpdateAvatar(userInfo.id_user, avatarUrl)}>Update avatar</button>\n                </div>\n            </div>\n            <NotificationContainer ref={notificationRef} />\n        </section>\n    )\n};\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}